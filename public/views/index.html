<!DOCTYPE html>
<html ng-app='app' ng-cloak>
	<head>
		<base href="/">
		<title>Prueba</title>
		<link rel="stylesheet" href="src/css/main.css">
	</head>

	<body ng-controller="appCtrl">
		<div id="wrapper" ng-if="isLogin()">
			<!-- Sidebar -->
			<div id="sidebar-wrapper">
		        <div class="sidebar-nav">
		        	<!-- informacion del Usuario -->
		            <div class="sidebar-brand">
		                <img src="src/images/user.png" class="img-responsive img-circle" alt="Cinque Terre" width="40" height="40" style="margin-top: 0.5vh;"> 

		                <p>{{ fullName }} 
		                	<span ng-click="arrow.profile=!arrow.profile">
			                	<i ng-class="{
				                		'glyphicon glyphicon-chevron-left': !arrow.profile,

				                		'glyphicon glyphicon-chevron-down': arrow.profile
				                	}"> 	
				                </i>
		                	</span>
		                </p>

		                <div ng-if="arrow.profile" class="dropdown-content">
						    <a href="">Perfil</a>
						    <a href="" ng-click="logout()">Logout</a>
					  	</div>
		            </div>
		            <!-- FIn de informacion del Usuario -->
		            
		            <!--Sección de seleccion de funcionalidad-->
	            	<div class="sidebar-brand select-functionality">
		            	<a href="" ng-click="createModel()">
		                	<span 
                        		class="glyphicon glyphicon-blackboard"
                        		aria-hidden="true">    
                    		</span>
                    	</a>

                    	<a href="" ng-click="testMarker()">
                    		<span 
                        		class="glyphicon glyphicon-camera"
                        		aria-hidden="true">    
                    		</span>
                    	</a>

                    	<a 
                    		href="" 
                    		ng-if="rolUser==='3'" 
                    		ng-click="mathEditor()">
                    		<span 
                        		class="glyphicon glyphicon-cloud"
                        		aria-hidden="true">    
                    		</span>
                    	</a>
	            	</div>
	            	<!--FIN Sección de selección de funcionalidad-->

	            	<!-- Funcionalidad Crear Modelo -->
		            <div ng-if="path === '/createModel2'">
			            <form>
			            	<div>
			            		<div class="form-group">
			            			<input 
			            			id="zFunctionText"
			            			type="text"
			            			name="" 
			            			class="form-control input-md" 
			            			required="required"
			            			pattern="" 
			            			title="">
			            		</div>

				            	<div class="col-sm-12 col-xs-12">
				            		<div class="col-sm-6 col-xs-6">
						            	<a 
						            		ng-if="rolUser==='3'"
							            	href="" 
							            	class="btn btn-mds btn-default btn-block"
							            	ng-click="graphGenerate()">Exportar
						            	</a>
					            	</div>

					            	<div class="col-sm-6 col-xs-6">
						            	<a 	
						            		href="" 
						            		class="btn btn-mds btn-default btn-block"
						            		ng-click="updateGraph()">Render
						            	</a>
					            	</div>				        	
				            	</div>
			            	</div>
		            		
			            	<div class="col-xs-12 col-sm-12 advanced-options">		
			            		<p ng-click="eventArrowOption()">Opciones avanzadas
			            			<span>
			            				<i ng-class="{
						                		'glyphicon glyphicon-chevron-left': !arrow.advOptions,

						                		'glyphicon glyphicon-chevron-down': arrow.advOptions
						                	}"> 
						                </i>
					                </span>
			            		</p>

			            		<!-- opcion avanzadas Grafica -->
			            		<div ng-if="arrow.advOptions">
			            			<div class="options">
					                	<div 
					                		class="btn-group" 
					                		role="group" 
					                		aria-label="...">
										  	
										  	<button 
										  		type="button" 
										  		class="btn btn-default btn-sm"
										  		ng-click="arrow.typeOption = 'graph'">Gráfica
										  	</button>
										  
										  	<button 
										  		type="button" 
										  		class="btn btn-default btn-sm"
										  		ng-click="arrow.typeOption = 'plane'">Plano
										  	</button>
										  
										  	<button 
										  		type="button" 
										  		class="btn btn-default btn-sm"
										  		ng-click="arrow.typeOption = 'axis'">Ejes
										  	</button>
										</div>
				                	</div>

			            			<div ng-if="arrow.typeOption==='graph'">
					                	<!-- Min,Max X -->
					                	<div class="advanced-options"> 
						                	<div class="col-sm-6 col-xs-6">
							            		<label>Alt Min X </label>
							            		<input 
							            			type="number" 
							            			name="" 
							            			id="input" 
							            			class="form-control input-sm"
							            			ng-init="customOption.x.min = -3"
							            			ng-model="customOption.x.min">
							            	</div>
							            	<div class="col-sm-6 col-xs-6">
							            		<label>Alt Max X </label>
							            		<input 
							            			type="number" 
							            			name="" 
							            			id="input" 
							            			class="form-control input-sm"
							            			ng-init="customOption.x.max = 3"
							            			ng-model="customOption.x.max">
							            	</div>
							            	<!-- Min,Max Y -->
							            	<div class="col-sm-6 col-xs-6">
							            		
							            		<label>Alt Min Y </label>
							            		<input 
							            			type="number" 
							            			name="" 
							            			id="input" 
							            			class="form-control input-sm"
							            			ng-init="customOption.y.min = -3"
							            			ng-model="customOption.y.min">
								            	
							            	</div>
							            	<div class="col-sm-6 col-xs-6">
							            		<label>Alt Max Y </label>
							            		<input 
							            			type="number" 
							            			name="" 
							            			id="input" 
							            			class="form-control input-sm"
							            			ng-init="customOption.y.max = 3"
							            			ng-model="customOption.y.max">
							            	</div>
							            	<!-- Min,Max Z -->
							            	<div class="col-sm-6 col-xs-6">
							            		<label>Alt Min Z </label>
							            		<input 
							            			type="number" 
							            			name="" 
							            			id="input" 
							            			class="form-control input-sm"
							            			ng-init="customOption.z.min = -3"
							            			ng-model="customOption.z.min">
								            	
							            	</div>
							            	<div class="col-sm-6 col-xs-6">
							            		<label>Alt Max Z </label>
							            		<input 
							            			type="number" 
							            			name="" 
							            			id="input" 
							            			class="form-control input-sm"
							            			ng-init="customOption.z.max = 3"
							            			ng-model="customOption.z.max">
							            	</div>
					                	</div>
					                </div>
					                <!-- FIN opcion avanzadas Grafica -->

					                <!-- Opciones avanzadas del Plano-->
					                <div ng-if="arrow.typeOption==='plane'">
					                	<div class="advanced-options">
					                		<div 
					                			class="col-sm-11 col-xs-11">
						                		<label>Tamaño del Plano</label>
								            		<input 
								            			type="number" 
								            			name="" 
								            			id="input" 
								            			class="form-control input-sm"
								            			ng-model="customOption.planeSize">
								            </div>

								            <div 
								            	class="col-sm-11 col-xs-11">
								            	<label>Subdivisiones del Plano
								            	</label>
								            		<input 
								            			type="number" 
								            			name="" 
								            			id="input" 
								            			class="form-control input-sm"
								            			ng-model="customOption.planeSubdivition">
								            </div>
					                	</div>
					                </div>
					                <!-- FIN Opciones avanzadas del Plano--> 			            
					                	
					                <!-- Opciones avanzadas del ejes-->
					                <div ng-if="arrow.typeOption==='axis'">
					                	<div class="advanced-options">
						                	<div class="col-sm-11 col-xs-11">
									            	<label>Tamaño de los Ejes
									            	</label>
									            		<input 
									            			type="number" 
									            			name="" 
									            			id="input" 
									            			class="form-control input-sm"
									            			ng-model="customOption.axisSize">
					                		</div>
					                	</div>
					                </div>
					                <!-- FIN Opciones avanzadas del ejes-->		
			            		</div>

			            		<div ng-show="loadingCreateModel">
									<label>Cargando</label>
									<div class="progress progress-striped">
										<div 
											id = "progressBar"
											class="progress-bar progress-bar-info" 
											role="progressbar"
											aria-valuenow="0" 
											aria-valuemin="0" 
											aria-valuemax="100"
											style="width: 0%">
											<span id="spanProgressBar"></span>
										</div>
									</div>
								</div>				                
			            	</div>				        
				        </form>	
		            </div>
		            <!-- Funcionalidad Crear Modelo -->

		             <!-- Funcionalidad TestMarker Profesor-->
		            <div ng-if="path === '/testMarker' && rolUser==='3'">
			            <div id="markers" class="box-content-teacher">
			            	<div class="zone" ng-repeat="marker in markers" id="marker{{$index}}">
			            		<div class="col-sm-5 col-xs-5">
				            		<img class="img-responsive" src="{{marker.imgFilePath}}" alt="">
				            	</div>

				            	<div class="col-sm-1 col-xs-1">
									<input type="checkbox" name="" ng-model="markers[$index].check">
				            	</div>	
				            	
				            	<div class="col-sm-5 col-xs-5" >
				            		<div 
				            			id="resource"
				            			class="apps-container screen floatleft" 
				            			ng-init="markers[$index].src = []"
				            			ng-model="markers[$index].src"
				            			ng-class="{ 
				            				'first-marker' : markers.length === 1 || markers.length === 2, 
				            				'marker-selected' :  markers[$index].src.length >= 1
				            			}"
				            			ui-sortable="sortableOptions"
				            			ui-sortable-receive="updateScene($index)"
				            			ui-sortable-remove="deleteOfScene(markers[$index].name,$index)">

					            		<div ng-repeat="item in markers[$index].src"> 
					            			<span> GLTF 
					            				<i class="glyphicon glyphicon-ok">
					            				</i>
					            			</span>
					            			<div style="clear: both;"></div>
				            			</div>
				            		</div>
				            	</div>
			            	</div>
			            </div>

		            	<div class="col-sm-12 col-xs-12 margin-botton">
		            		<div class="col-sm-6 col-xs-6">
				            	<a 
					            	href="" 
					            	class="btn btn-mds btn-default btn-block"
					            	ng-click="markerDelete()">Eliminar
				            	</a>
			            	</div>

			            	<div class="col-sm-6 col-xs-6">
				            	<a 	
				            		href="" 
				            		class="btn btn-mds btn-default btn-block"
				            		ng-click="markerGenerate()">Generar
				            	</a>
			            	</div>				        	
		            	</div>


		            	<div ng-show="!loadingModel" 
		            		class="col-xs-12 col-sm-12 box-content-teacher">
	            			<p 
	            				class="text-right" 
	            				ng-click="fileCheckShow = !fileCheckShow">
	            				Seleccionar
	            			</p>

			            	<div 
			            		id="files" 
			            		class="apps-container screen floatleft" 
			            		ui-sortable="sortableOptions" 
			            		ng-model="models" 
			            		ng-init="modelFileLoad()" 
			            		style="color: white;">
			            		<div ng-repeat="item in models"> 
			            			<p>
			            				<input 
			            					ng-if="fileCheckShow" 
			            					type="checkbox" 
			            					name="" 
			            					ng-model="models[$index].check"> {{ item.name }}
			            			</p>  
			            		</div>
			            	</div>
		            		

		            		<div style="clear: both;"></div>
		            	</div>

						<div ng-show="loadingModel">
							<label style="color: white">Cargando</label>
							<div class="progress progress-striped">
								<div 
									class="progress-bar progress-bar-info" 
									role="progressbar"
									aria-valuenow="0" 
									aria-valuemin="0" 
									aria-valuemax="100"
									style="width: {{progressPercentage}}%">
									<span>{{progressPercentage}}% completado</span>
								</div>
							</div>
						</div>

		            	<div class="col-sm-12 col-xs-12 margin-botton">
		            		<div class="col-sm-6 col-xs-6">
				            	<a 	
				            		href="" 
				            		class="btn btn-mds btn-default btn-block "
				            		ng-click="modelFileDelete()">Eliminar
				            	</a>
			            	</div>		

		            		<div class="col-sm-6 col-xs-6">
				            	<span 
				            		class="btn btn-mds btn-default btn-block btn-file">
				            		<span >
				            			Importar
				            		</span>
				            		<input 
				            			ngf-select
				            			ngf-max-size="12MB"
				            			ngf-accept="'.obj,.mtl'"
				            			ngf-pattern="'.obj,.mtl/'"
				            			ngf-model-invalid="errorFile" 
				            			ng-model="file"
				            			ng-change="importFileObj(file)"
				            			type="file"
				            			/>
				            	</span>
			            	</div>			            			        	
		            	</div>

		            	<div class="col-sm-12 col-xs-12 margin-botton ">
		            		<div class="col-sm-offset-3 col-xs-offset-3 col-sm-6 col-xs-6 margin-not">
				            	<a 	
				            		href="" 
				            		class="btn btn-mds btn-default btn-block"
				            		ng-click="generatePdf()">Generar PDF
				            	</a>
			            	</div>		
		            	</div>
		            </div>
		            <!-- FIN Funcionalidad TestMarker Profesor -->

		            <!-- Funcionalidad TestMarker Estudiante-->
		            <div ng-if="path === '/testMarker' && rolUser === '2'">
			            <div class="col-xs-12 col-sm-12">
	            			<div ng-repeat="asignature in asignatures">
					            <p ng-if="!arrow.folderGuide" class="guide">
					            	<span 
					            		id="folder"
					            		class="folder" 
					            		ng-click="arrow.folderResource = !arrow.folderResource">
					            		<i ng-class="{
						                		'glyphicon glyphicon-folder-close': !arrow.folderResource,

						                		'glyphicon glyphicon-folder-open': arrow.folderResource,
						                	}">	
						                </i>
						            </span> 
						            <span id="guideName">{{ asignature.name }}</span>
				            		<span 
				            			id="arrowGuide"
				            			ng-click="arrow.folderResource=!arrow.folderResource">
					                	<i ng-class="{
						                		'glyphicon glyphicon-chevron-left': !arrow.folderResource,

						                		'glyphicon glyphicon-chevron-down': arrow.folderResource
						                	}"> 	
						                </i>
				                	</span>
					            </p>

					            <div class="guide">
						            <ul 
						            	id="markerNameList" 
						            	ng-if="arrow.folderResource">
						            	<li ng-repeat="guide in guides" >
						            		<span ng-click="getResource(guide.num_guide)">
						            			{{ guide.type_name }}
						            		</span>
						            	</li>				            	
						            </ul>
					        	</div>
	            			</div>
		            	</div>
		            </div>
		            <!-- FIN Funcionalidad TestMarker Estudiante-->

		            <!-- Funcionalidad MathEditor -->
		            <div ng-if="path === '/mathEditor' && rolUser === '3'">
	            		<div class="col-xs-12 col-sm-12">
				            <p ng-if="!arrow.folderGuide" class="guide">
				            	<span 
				            		id="folder"
				            		class="folder" 
				            		ng-click="arrow.folderResource = !arrow.folderResource">
				            		<i ng-class="{
					                		'glyphicon glyphicon-folder-close': !arrow.folderResource,

					                		'glyphicon glyphicon-folder-open': arrow.folderResource,
					                	}">	
					                </i>
					            </span> 
					            <span id="guideName">Recursos</span>
			            		<span 
			            			id="arrow"
			            			ng-click="arrow.folderResource=!arrow.folderResource">
				                	<i ng-class="{
					                		'glyphicon glyphicon-chevron-left': !arrow.folderResource,

					                		'glyphicon glyphicon-chevron-down': arrow.folderResource
					                	}"> 	
					                </i>
			                	</span>
				            </p>

				            <div class="guide">
					            <ul id="markerNameList" ng-if="arrow.folderResource">
					            	<li 
					            		ng-repeat="marker in markers" 
					            		ng-if="marker.src.length > 0"> 
					            		<span
					            			id="markerName"
					            			ng-click="insertImage($index)">{{ marker.name }}
					            		</span>
					            	</li>				            	
					            </ul>
					        </div>

				            <p ng-if="!arrow.folderResource" class="guide">
				            	<span 
				            		id="folder"
				            		class="folder" 
				            		ng-click="arrow.folderGuide = !arrow.folderGuide">
				            		<i ng-class="{
					                		'glyphicon glyphicon-folder-close': !arrow.folderGuide,

					                		'glyphicon glyphicon-folder-open': arrow.folderGuide,
					                	}">	
					                </i>
					            </span> 
					            <span id="guideName">Guías</span>
			            		<span 
			            			id="arrow"
			            			ng-click="arrow.folderGuide=!arrow.folderGuide">
				                	<i ng-class="{
					                		'glyphicon glyphicon-chevron-left': !arrow.folderGuide,

					                		'glyphicon glyphicon-chevron-down': arrow.folderGuide
					                	}"> 	
					                </i>
			                	</span>
				            </p>
		            	</div>

		            	<!-- Boton de Generar PDF y Guardar -->
		            	<div ng-if="arrow.folderResource" class="col-sm-12 col-xs-12 margin-botton">
		            		<div class="col-sm-6 col-xs-6 margin-not">
				            	<a 	
				            		id="bottomLeft"
				            		href="" 
				            		class="btn btn-mds btn-default btn-block"
				            		ng-click="pdfGenerate()">PDF
				            	</a>
			            	</div>		

		            		<div class="col-sm-6 col-xs-6 margin-not">
				            	<a 	
				            		id="bottomRight"
				            		href="" 
				            		class="btn btn-mds btn-default btn-block"
				            		ng-click="saveResource()">Guardar
				            	</a>
			            	</div>
		            	</div>
		            	<!-- FIN Boton de Generar PDF y Guardar -->
	            	</div>
		            <!-- FIN Funcionalidad MathEditor -->
		        </div>
		    </div>
		    <!-- /#sidebar-wrapper -->
		    <div ng-view="">
			</div>   		
		</div>

		<div ng-if="!isLogin()" ng-view="">
		</div>

		<!-- Dependencias -->
		<script src="node_modules/jquery/dist/jquery.min.js"></script>
		<script src="lib/jquery-ui/jqueryUI.min.js"></script>
		<script src="node_modules/angular/angular.min.js">
		</script>

		<script src="node_modules/angular-ui-sortable/dist/sortable.min.js"></script>

		<script src="node_modules/ng-file-upload/dist/ng-file-upload.min.js"></script>

		<script src="node_modules/angular-route/angular-route.min.js"></script>
		<script src="node_modules/ngstorage/ngStorage.min.js"></script>

		<script src="node_modules/angular-ui-bootstrap/dist/ui-bootstrap-tpls.js"></script>

		
		<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>


		<script src="node_modules/jquery/dist/jquery.min.js"></script>
		<script src="lib/three/THREEx.WindowResize.js"></script>
		<script src="node_modules/three/build/three.min.js"></script>
		<script src='lib/qrcode/QRcode.js'></script>
		<script src='node_modules/pdfmake/build/pdfmake.min.js'></script>
		<script src='node_modules/pdfmake/build/vfs_fonts.js'></script>
		<!-- FIN Dependencias -->

		<!-- Dependencias AR -->
		<script src="lib/aframe/aframe.min.js"></script>
		<script src="lib/aframe/aframe-ar.js"></script> 
		<script src="lib/arjs/threex-arpatternfile.js"></script>
		<script src="node_modules/aframe-orbit-controls-component-2/dist/aframe-orbit-controls-component.min.js"></script>
		<!-- FIN Dependencias AR -->
		
		<!-- Dependencias create Model -->
		<script src="lib/parser/parser.js"></script>
		<script src="node_modules/three/examples/js/controls/OrbitControls.js"></script>
		<!-- FIN Dependencias create Model -->

		<!--Exporter-->
		<script src="lib/exporter/OBJExporter.js"></script>
		<script src="node_modules/lzma/src/lzma.js"></script>
		<script src="node_modules/lzma/src/lzma_worker.js"></script>
		<!--FIN Exporter-->

		<!-- Editor Text -->
		<script src="node_modules/quill/dist/quill.min.js"></script>
		<script src="lib/katex/katex.js"></script>
		<script src="lib/css-pdf/css2pdf.js"></script>
		<!-- Editor Text -->

		<!--Manejo de Tokens -->
		<script src="node_modules/satellizer/dist/satellizer.min.js"></script>
		<!--Fin de manejo de Token -->

		<!-- Modales -->
		<script src="node_modules/sweetalert2/dist/sweetalert2.all.min.js"></script>
		<!-- Fin Modales -->

		<!-- FIN Javascript Propios -->
		<script src="dist/bundle.js"></script>
		<!-- FIN Javascript Propios -->
	</body>
</html>



